// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘           PATIENTDATA.PRISMA - PATIENT HEALTH INFORMATION SYSTEM             â•‘
// â•‘                    Complete Beginner's Guide                                 â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//
// ğŸ“š WHAT IS THIS FILE?
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// This file defines the PATIENT HEALTH DOMAIN - sensitive medical data:
// - PatientHealthData â†’ Comprehensive health profile (1:1 with Patient)
// - MedicalReport     â†’ Uploaded medical documents (1:M with Patient)
//
// âš ï¸ PRIVACY & COMPLIANCE WARNING
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// This file contains models for PROTECTED HEALTH INFORMATION (PHI).
// These models require special handling:
//
//     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
//     â”‚                    COMPLIANCE REQUIREMENTS                          â”‚
//     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
//     â”‚   HIPAA (USA)      â”‚ Health Insurance Portability and              â”‚
//     â”‚                    â”‚ Accountability Act                             â”‚
//     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
//     â”‚   GDPR (EU)        â”‚ General Data Protection Regulation             â”‚
//     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
//     â”‚   Data at Rest     â”‚ Encrypt database and file storage              â”‚
//     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
//     â”‚   Data in Transit  â”‚ Use HTTPS/TLS for all communications           â”‚
//     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
//     â”‚   Access Logging   â”‚ Log all access to PHI                          â”‚
//     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
//     â”‚   Retention        â”‚ Retain records per legal requirements          â”‚
//     â”‚                    â”‚ (often 7+ years)                               â”‚
//     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
//     â”‚   Access Control   â”‚ Only authorized personnel can access           â”‚
//     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
//
// ğŸ¯ BUSINESS CONTEXT
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Patient health data helps doctors:
// - Understand patient's medical history
// - Check for allergies before prescribing
// - Know emergency contacts
// - Track ongoing conditions
//
// PATIENT JOURNEY:
// 1. Patient registers â†’ Patient profile created (basic info)
// 2. Patient updates health info â†’ PatientHealthData created
// 3. Patient uploads documents â†’ MedicalReport records created
// 4. Doctor reviews during appointment
//
// ğŸ“ DESIGN PATTERN: OPTIONAL ONE-TO-ONE
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// PatientHealthData is OPTIONAL for Patient.
//
// WHY?
// - New patients don't have health data yet
// - Privacy: Some patients prefer not to share
// - Progressive disclosure: Add data over time
//
// RELATIONSHIP:
//     Patient                    PatientHealthData
//     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
//     â”‚ id             â”‚â”€â”€â”€â”€â”€â”€â”€?â”‚ patientId (FK)     â”‚
//     â”‚ name           â”‚        â”‚ dateOfBirth        â”‚
//     â”‚ email          â”‚        â”‚ bloodGroup         â”‚
//     â”‚ ...            â”‚        â”‚ heightCm, weightKg â”‚
//     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ allergies          â”‚
//                               â”‚ ...                â”‚
//                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
//
//     The "?" means optional (0 or 1)
//
// ğŸ“ DESIGN PATTERN: EXPLICIT UNIT NAMING
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Notice field names include units: heightCm, weightKg, bmi
//
// WHY EXPLICIT UNITS?
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Medical data MUST be unambiguous about units.
// A height of "175" could mean:
// - 175 cm (correct)
// - 175 inches (wrong - would be 14.5 feet!)
// - 175 mm (wrong - would be 17.5 cm)
//
// BAD PRACTICE:
// height Float   // What unit? cm? inches? feet?
//
// GOOD PRACTICE:
// heightCm Float  // Clearly centimeters
// weightKg Float  // Clearly kilograms
//
// INDUSTRY STANDARD:
// - HL7 FHIR (healthcare data standard) uses explicit units
// - All medical systems should be unambiguous
//
// UNIT CONVERSIONS (for US users):
// heightCm Ã— 0.393701 = inches
// weightKg Ã— 2.20462 = pounds
//
// ğŸ“– DOCUMENTATION:
// - One-to-One Relations: https://www.prisma.io/docs/orm/prisma-schema/data-model/relations/one-to-one-relations
// - HIPAA Compliance: https://www.hhs.gov/hipaa/index.html
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚                       PATIENTHEALTHDATA MODEL                                â”‚
// â”‚              Comprehensive health profile for patients                       â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
//
// PURPOSE:
// Stores detailed health information beyond basic profile.
// Created when patient first updates their health info.
//
// WHAT IT TRACKS:
// - Demographics: DOB, gender, marital status
// - Physical: Height, weight, BMI
// - Medical: Blood group, allergies, conditions, medications
// - Family history: Hereditary conditions
// - Emergency: Contact information
// - Lifestyle: Smoking, alcohol, diet
//
/// PatientHealthData - Comprehensive health profile for a patient
/// Optional 1:1 relationship - created when patient first updates health info
///
/// @note This model contains Protected Health Information (PHI).
///       Ensure HIPAA compliance: encryption at rest, audit logging, access control.
///
/// @example Creating patient health data:
///   {
///     dateOfBirth: new Date('1990-05-15'),
///     gender: 'MALE',
///     bloodGroup: 'O_POSITIVE',
///     heightCm: 175.5,      // 175.5 centimeters
///     weightKg: 70.2,       // 70.2 kilograms
///     bmi: 22.8             // Auto-calculated: weightKg / (heightCm/100)Â²
///   }
model PatientHealthData {
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // PRIMARY KEY: UUID v7 (time-ordered)
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    id String @id @default(uuid(7))

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // DEMOGRAPHIC INFORMATION
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    //
    // dateOfBirth:
    // @db.Date â†’ PostgreSQL DATE (YYYY-MM-DD only)
    // Required for age calculations and pediatric/geriatric considerations
    //
    // CALCULATING AGE:
    // const age = differenceInYears(new Date(), patient.dateOfBirth);
    //
    // gender:
    // From Gender enum (MALE, FEMALE, OTHER)
    // Important for medical contexts (dosage, conditions)
    //
    // bloodGroup:
    // From BloodGroup enum (A_POSITIVE, O_NEGATIVE, etc.)
    // Optional - some patients don't know their blood type
    // CRITICAL for emergencies and transfusions
    //
    // maritalStatus:
    // From MaritalStatus enum
    // Optional - useful for medical history (pregnancy, etc.)
    //
    dateOfBirth   DateTime       @db.Date
    gender        Gender
    bloodGroup    BloodGroup?
    maritalStatus MaritalStatus?

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // PHYSICAL MEASUREMENTS (with explicit units in field names)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //
    // BEST PRACTICE: EXPLICIT UNIT NAMING
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Medical data REQUIRES unambiguous units.
    // Field names include unit suffix: heightCm, weightKg
    //
    // WHY THIS MATTERS:
    // NASA Mars Climate Orbiter crashed in 1999 because one team used
    // metric units and another used imperial. Cost: $125 million.
    // In healthcare, unit confusion can be life-threatening!
    //
    // INDUSTRY STANDARD:
    // HL7 FHIR (healthcare data standard) uses explicit units.
    // This pattern is common in all serious medical systems.
    //
    // @map("height_cm") â†’ Column name in database is "height_cm" (snake_case)
    // Field name in code is "heightCm" (camelCase)
    //

    /// Height in centimeters (cm). Example: 175.5 = 175.5 cm = 5'9"
    /// @precision Stored as DOUBLE PRECISION in PostgreSQL (15-17 significant digits)
    //
    // CONVERSION EXAMPLES:
    // 175 cm = 68.9 inches = 5'9"
    // 160 cm = 63.0 inches = 5'3"
    // 180 cm = 70.9 inches = 5'11"
    //
    // FORMULA: inches = cm Ã— 0.393701
    //
    heightCm Float? @map("height_cm")

    /// Weight in kilograms (kg). Example: 70.2 = 70.2 kg = 154.8 lbs
    /// @precision Stored as DOUBLE PRECISION in PostgreSQL
    //
    // CONVERSION EXAMPLES:
    // 70 kg = 154.3 lbs
    // 60 kg = 132.3 lbs
    // 80 kg = 176.4 lbs
    //
    // FORMULA: lbs = kg Ã— 2.20462
    //
    weightKg Float? @map("weight_kg")

    /// Body Mass Index - calculated field: weightKg / (heightCm/100)Â²
    /// @note Should be recalculated on every height/weight update
    /// @range Healthy BMI: 18.5-24.9, Overweight: 25-29.9, Obese: 30+
    //
    // BMI FORMULA:
    // bmi = weightKg / (heightCm / 100)Â²
    //
    // EXAMPLE:
    // Weight: 70 kg, Height: 175 cm
    // bmi = 70 / (1.75)Â² = 70 / 3.0625 = 22.86
    //
    // BMI CATEGORIES:
    // â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    // â”‚ Category         â”‚ BMI Range   â”‚ Health Implications         â”‚
    // â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    // â”‚ Underweight      â”‚ < 18.5      â”‚ May indicate malnutrition   â”‚
    // â”‚ Normal           â”‚ 18.5 - 24.9 â”‚ Healthy weight range        â”‚
    // â”‚ Overweight       â”‚ 25.0 - 29.9 â”‚ Increased health risks      â”‚
    // â”‚ Obese Class I    â”‚ 30.0 - 34.9 â”‚ High health risks           â”‚
    // â”‚ Obese Class II   â”‚ 35.0 - 39.9 â”‚ Very high health risks      â”‚
    // â”‚ Obese Class III  â”‚ â‰¥ 40.0      â”‚ Extremely high health risks â”‚
    // â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    //
    // APPLICATION CODE:
    // function calculateBMI(weightKg: number, heightCm: number): number {
    //   const heightM = heightCm / 100;
    //   return Math.round((weightKg / (heightM * heightM)) * 100) / 100;
    // }
    //
    bmi Float? @map("bmi")

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // MEDICAL HISTORY (stored as text for flexibility)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //
    // WHY TEXT INSTEAD OF JSON/STRUCTURED?
    // - Simpler input for patients
    // - Flexible format
    // - Full-text search possible
    //
    // FUTURE IMPROVEMENT:
    // Consider using JSON type for structured storage:
    // allergies: [{ name: "Penicillin", severity: "severe" }]
    //

    /// Known allergies - medications, food, environmental
    /// @example "Penicillin (severe), Peanuts (moderate), Latex (mild)"
    //
    // ALLERGY TYPES:
    // - Drug allergies: Penicillin, Sulfa, Aspirin
    // - Food allergies: Peanuts, Shellfish, Dairy
    // - Environmental: Pollen, Dust, Pet dander
    // - Contact: Latex, Nickel
    //
    // WHY THIS IS CRITICAL:
    // Prescribing a medication to someone allergic can be fatal!
    // Always check allergies before prescribing.
    //
    allergies String? @db.Text

    /// Ongoing chronic conditions requiring regular management
    /// @example "Type 2 Diabetes, Hypertension, Asthma"
    //
    // COMMON CHRONIC CONDITIONS:
    // - Cardiovascular: Hypertension, Heart disease
    // - Metabolic: Diabetes, Thyroid disorders
    // - Respiratory: Asthma, COPD
    // - Autoimmune: Rheumatoid arthritis, Lupus
    // - Mental health: Depression, Anxiety
    //
    chronicConditions String? @db.Text

    /// Current medications with dosage information
    /// @example "Metformin 500mg twice daily, Lisinopril 10mg once daily"
    //
    // WHY TRACK MEDICATIONS:
    // - Drug interactions (dangerous combinations)
    // - Dosage adjustments
    // - Avoid duplicate prescriptions
    //
    // RECOMMENDED FORMAT:
    // "[Drug Name] [Dose] [Frequency]"
    // Example: "Metformin 500mg twice daily after meals"
    //
    currentMedications String? @db.Text

    /// Family history of medical conditions (hereditary risk factors)
    /// @example "Father: Heart disease, Mother: Type 2 Diabetes"
    //
    // WHY FAMILY HISTORY MATTERS:
    // Many conditions have genetic components:
    // - Heart disease
    // - Diabetes
    // - Cancer
    // - Mental health conditions
    //
    // Helps doctors assess risk and recommend preventive care.
    //
    familyMedicalHistory String? @db.Text

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // EMERGENCY CONTACT INFORMATION
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //
    // CRITICAL FOR EMERGENCIES:
    // If patient is unconscious or incapacitated, who do we call?
    //

    /// Emergency contact full name
    emergencyContactName String? @db.VarChar(100)

    /// Emergency contact phone with country code
    /// @example "+1-555-123-4567" or "+880-1712-345678"
    //
    // PHONE FORMAT:
    // International format recommended: +[country code]-[number]
    // Examples:
    // - USA: +1-555-123-4567
    // - UK: +44-20-7946-0958
    // - Bangladesh: +880-1712-345678
    //
    emergencyContactPhone String? @db.VarChar(20)

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // LIFESTYLE INFORMATION (affects treatment decisions)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //
    // WHY LIFESTYLE DATA MATTERS:
    // - Smoking affects lung health, surgery risk, medication metabolism
    // - Alcohol interacts with many medications
    // - Diet affects chronic conditions (diabetes, heart disease)
    //

    /// Smoking status: true = smoker, false = non-smoker, null = not disclosed
    //
    // MEDICAL RELEVANCE:
    // - Increased risk: Lung cancer, heart disease, stroke
    // - Surgery: Higher complication risk
    // - Medications: Some drugs metabolized differently
    //
    smokingStatus Boolean?

    /// Alcohol consumption: true = consumes, false = abstains, null = not disclosed
    //
    // MEDICAL RELEVANCE:
    // - Drug interactions (especially sedatives, pain meds)
    // - Liver function considerations
    // - Surgery: Withdrawal risk in heavy drinkers
    //
    alcoholConsumption Boolean?

    /// Dietary restrictions or preferences
    /// @example "Vegetarian, Lactose intolerant, Low sodium diet"
    //
    // EXAMPLES:
    // - Religious: Halal, Kosher, Vegetarian (Hindu)
    // - Medical: Low sodium (hypertension), Gluten-free (celiac)
    // - Preference: Vegan, Pescatarian
    //
    // WHY IT MATTERS:
    // - Some medications contain animal products
    // - Diet affects chronic conditions
    // - Hospital meal planning
    //
    dietaryPreferences String? @db.Text

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // AUDIT FIELDS (standard across all models)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //
    // SPECIAL NOTE FOR PHI:
    // In addition to standard audit fields, you should implement:
    // - Access logging (who viewed this data, when)
    // - Change logging (what was changed, by whom)
    // This is required for HIPAA compliance.
    //
    createdAt DateTime  @default(now())
    updatedAt DateTime  @updatedAt
    isDeleted Boolean   @default(false)
    deletedAt DateTime?

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // FOREIGN KEY: One-to-one with Patient
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    //
    // @unique â†’ Enforces ONE health record per patient
    //
    // WHY ONE-TO-ONE (not one-to-many)?
    // - Each patient has one current health profile
    // - Historical data can be tracked via updatedAt or separate audit table
    // - Simpler queries
    //
    patientId String  @unique
    patient   Patient @relation(fields: [patientId], references: [id], onDelete: Cascade, onUpdate: Cascade)

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // INDEXES
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    //
    // patient_health_data_blood_group_idx:
    // - Query: "Find patients with O_NEGATIVE blood" (for blood donor matching)
    // - Emergency: "Who can donate to this patient?"
    //
    // patient_health_data_dob_idx:
    // - Query: Age-based queries
    // - Example: "Patients over 65" (geriatric care)
    // - Example: "Patients under 18" (pediatric care)
    //
    @@index([isDeleted], map: "patient_health_data_deleted_idx")
    @@index([bloodGroup], map: "patient_health_data_blood_group_idx")
    @@index([dateOfBirth], map: "patient_health_data_dob_idx")
    // Table mapping: snake_case table name
    @@map("patient_health_data")
}

// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚                         MEDICALREPORT MODEL                                  â”‚
// â”‚              Uploaded medical documents for patients                         â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
//
// PURPOSE:
// Stores references to uploaded medical documents.
// The actual files are stored in cloud storage (S3, GCS, etc.)
// This table stores metadata and file URLs.
//
// DOCUMENT TYPES:
// - Lab reports (blood tests, urine tests)
// - Imaging (X-rays, MRI, CT scans)
// - Previous prescriptions
// - Surgical reports
// - Discharge summaries
//
// FILE STORAGE PATTERN:
//
//     Patient                  MedicalReport                 Cloud Storage
//     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
//     â”‚ id       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<â”‚ patientId    â”‚              â”‚ S3 / GCS      â”‚
//     â”‚ name     â”‚            â”‚ reportType   â”‚              â”‚               â”‚
//     â”‚ ...      â”‚            â”‚ fileUrl  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ /reports/     â”‚
//     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚ reportName   â”‚              â”‚   blood_test.pdf
//                             â”‚ notes        â”‚              â”‚   xray_chest.jpg
//                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
//
// SECURITY CONSIDERATIONS:
// - Use signed URLs for file access (temporary, expiring links)
// - Don't store files in public S3 buckets
// - Log all file access for HIPAA compliance
//
/// MedicalReport - Uploaded medical documents for a patient
/// Stores file references and metadata for lab reports, scans, etc.
model MedicalReport {
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // PRIMARY KEY
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    id String @id @default(uuid(7))

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // REPORT NAME: Human-readable identifier
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    //
    // @db.VarChar(200) â†’ Max 200 characters
    //
    // EXAMPLES:
    // - "Blood Test Results - January 2026"
    // - "Chest X-Ray - Pre-surgery"
    // - "MRI Brain - Follow-up"
    //
    // NAMING BEST PRACTICE:
    // "[Type] - [Date/Purpose]"
    //
    reportName String @db.VarChar(200)

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // REPORT TYPE: Categorization using enum
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    //
    // From ReportType enum (see enums.prisma):
    // - LAB_REPORT: Blood tests, urine tests, biopsies
    // - IMAGING: X-rays, MRI, CT scans, ultrasounds
    // - PRESCRIPTION: Previous prescriptions from other doctors
    // - DISCHARGE_SUMMARY: Hospital discharge documents
    // - CONSULTATION_NOTES: Notes from specialist consultations
    // - INSURANCE: Insurance documents, claims
    // - OTHER: Anything that doesn't fit above
    //
    // WHY ENUM INSTEAD OF STRING?
    // - Type safety
    // - Easier filtering
    // - Consistent categorization
    //
    reportType ReportType

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // FILE URL: Location of uploaded file
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    //
    // @db.VarChar(500) â†’ URLs can be long (especially signed URLs)
    //
    // URL PATTERNS:
    //
    // S3 (AWS):
    // https://bucket-name.s3.region.amazonaws.com/path/to/file.pdf
    //
    // S3 Signed URL (temporary):
    // https://bucket.s3.amazonaws.com/file.pdf?X-Amz-Signature=...&X-Amz-Expires=3600
    //
    // GCS (Google Cloud):
    // https://storage.googleapis.com/bucket-name/path/to/file.pdf
    //
    // Cloudinary:
    // https://res.cloudinary.com/cloud-name/image/upload/v123/file.pdf
    //
    // SECURITY:
    // For PHI, use SIGNED URLs that:
    // - Expire after short time (1 hour)
    // - Can only be accessed by authorized users
    // - Are logged for audit trail
    //
    fileUrl String @db.VarChar(500)

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // NOTES: Additional information about the report
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    //
    // @db.Text â†’ Unlimited length
    // Optional field for context
    //
    // EXAMPLES:
    // - "Results show slightly elevated cholesterol, discussed with Dr. Smith"
    // - "Follow-up required in 3 months"
    // - "Previous doctor's prescription from before joining our system"
    //
    notes String? @db.Text

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // AUDIT FIELDS
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    createdAt DateTime  @default(now())
    updatedAt DateTime  @updatedAt
    isDeleted Boolean   @default(false)
    deletedAt DateTime?

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // FOREIGN KEY: One-to-many with Patient
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    //
    // NOT @unique â†’ A patient can have MANY reports
    //
    // CASCADE:
    // If patient deleted â†’ All their reports deleted
    //
    patientId String
    patient   Patient @relation(fields: [patientId], references: [id], onDelete: Cascade, onUpdate: Cascade)

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // INDEXES
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    //
    // medical_report_patient_idx:
    // - Composite: patientId + createdAt (desc)
    // - Query: "Patient's reports, most recent first"
    // - Use case: Show patient's medical history
    //
    // medical_report_type_idx:
    // - Query: "All lab reports" or "All imaging reports"
    // - Use case: Filter by report type
    //
    @@index([patientId, createdAt(sort: Desc)], map: "medical_report_patient_idx")
    @@index([reportType], map: "medical_report_type_idx")
    @@index([isDeleted], map: "medical_report_deleted_idx")
    // Table mapping
    @@map("medical_reports")
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// QUICK REFERENCE: WORKING WITH PATIENT HEALTH DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//
// 1. CREATE PATIENT HEALTH DATA:
// const healthData = await prisma.patientHealthData.create({
//   data: {
//     patientId: patient.id,
//     dateOfBirth: new Date('1990-05-15'),
//     gender: 'MALE',
//     bloodGroup: 'O_POSITIVE',
//     heightCm: 175.5,
//     weightKg: 70.2,
//     bmi: calculateBMI(70.2, 175.5),  // 22.8
//     allergies: 'Penicillin (severe)',
//     emergencyContactName: 'Jane Doe',
//     emergencyContactPhone: '+1-555-123-4567'
//   }
// });
//
// 2. UPDATE WITH BMI CALCULATION:
// function calculateBMI(weightKg: number, heightCm: number): number {
//   const heightM = heightCm / 100;
//   return Math.round((weightKg / (heightM * heightM)) * 100) / 100;
// }
//
// await prisma.patientHealthData.update({
//   where: { patientId: patient.id },
//   data: {
//     weightKg: 72.5,
//     bmi: calculateBMI(72.5, healthData.heightCm)
//   }
// });
//
// 3. GET PATIENT WITH HEALTH DATA AND REPORTS:
// const patientWithHealth = await prisma.patient.findUnique({
//   where: { id: patientId },
//   include: {
//     patientHealthData: true,
//     medicalReport: {
//       where: { isDeleted: false },
//       orderBy: { createdAt: 'desc' }
//     }
//   }
// });
//
// 4. UPLOAD MEDICAL REPORT:
// // First, upload file to S3/GCS and get URL
// const fileUrl = await uploadToS3(file);
//
// // Then create database record
// await prisma.medicalReport.create({
//   data: {
//     patientId: patient.id,
//     reportName: 'Blood Test - January 2026',
//     reportType: 'LAB_REPORT',
//     fileUrl: fileUrl,
//     notes: 'Annual checkup results'
//   }
// });
//
// 5. FIND PATIENTS WITH SPECIFIC BLOOD GROUP (for blood bank):
// const oNegativePatients = await prisma.patientHealthData.findMany({
//   where: {
//     bloodGroup: 'O_NEGATIVE',
//     isDeleted: false
//   },
//   include: {
//     patient: {
//       select: { name: true, contactNumber: true }
//     }
//   }
// });
//
// 6. FIND PATIENTS BY AGE RANGE:
// const today = new Date();
// const sixtyFiveYearsAgo = subYears(today, 65);
//
// const elderlyPatients = await prisma.patientHealthData.findMany({
//   where: {
//     dateOfBirth: { lte: sixtyFiveYearsAgo },
//     isDeleted: false
//   },
//   include: { patient: true }
// });
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
