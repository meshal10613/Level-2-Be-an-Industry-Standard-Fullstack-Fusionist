<!-- <!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Google Login</title>
    </head>
    <body>
        <div>
            <p>Redirecting To Google...</p>
        </div>
    </body>
    <script>
        (async () => {
            try {
                const response = await fetch(
                    "<%= betterAuthUrl %>/api/auth/sign-in/social",
                    {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                        },
                        credentials: "include",
                        body: JSON.stringify({
                            provider: "google",
                            callbackURL: "<%= callbackURL %>",
                        }),
                    },
                );

                const data = await response.json();

                if (data.url) {
                    window.location.href = data.url;
                } else {
                    document.body.innerHTML = `<div>
                    <p>
                        Error Occurred While Redirecting To Google. Please Try Again Later.
                    </p>
                    </div>`;
                }
            } catch (error) {
                document.body.innerHTML = `<div>
                    <p>
                        Error Occurred While Redirecting To Google. Please Try Again Later.
                        ${error.message}
                    </p>
                    </div>`;
            }
        })();
    </script>
</html> -->

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Redirecting to Google</title>

        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
                font-family:
                    -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                    Oxygen, Ubuntu, sans-serif;
            }

            body {
                height: 100vh;
                display: flex;
                align-items: center;
                justify-content: center;
                background: linear-gradient(135deg, #eef2ff, #f8fafc);
            }

            .card {
                background: white;
                padding: 40px 48px;
                border-radius: 18px;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.08);
                text-align: center;
                max-width: 420px;
                width: 90%;
            }

            .logo {
                width: 52px;
                margin-bottom: 18px;
            }

            h2 {
                font-size: 22px;
                color: #111827;
                margin-bottom: 8px;
            }

            p {
                color: #6b7280;
                font-size: 15px;
            }

            .spinner {
                margin: 28px auto;
                width: 42px;
                height: 42px;
                border: 4px solid #e5e7eb;
                border-top: 4px solid #4285f4;
                border-radius: 50%;
                animation: spin 0.9s linear infinite;
            }

            @keyframes spin {
                to {
                    transform: rotate(360deg);
                }
            }

            .error {
                color: #dc2626;
                font-weight: 500;
            }

            .retry-btn {
                margin-top: 18px;
                padding: 10px 18px;
                border-radius: 8px;
                border: none;
                background: #111827;
                color: white;
                font-weight: 500;
                cursor: pointer;
                transition: 0.2s;
            }

            .retry-btn:hover {
                background: #000;
            }
        </style>
    </head>

    <body>
        <div class="card" id="card">
            <img
                class="logo"
                src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg"
                alt="Google Logo"
            />

            <h2>Redirecting to Google.....</h2>
            <p>Please wait a moment while we securely connect you.</p>

            <div class="spinner"></div>
        </div>

        <script>
            async function redirectToGoogle() {
                try {
                    const response = await fetch(
                        "<%= betterAuthUrl %>/api/auth/sign-in/social",
                        {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json",
                            },
                            credentials: "include",
                            body: JSON.stringify({
                                provider: "google",
                                callbackURL: "<%= callbackURL %>",
                            }),
                        },
                    );

                    const data = await response.json();

                    if (data.url) {
                        window.location.href = data.url;
                    } else {
                        throw new Error("Invalid redirect URL");
                    }
                } catch (error) {
                    document.getElementById("card").innerHTML = `
                    <h2 class="error">Redirect Failed</h2>
                    <p>We couldn't connect to Google right now.</p>
                    <button class="retry-btn" onclick="location.reload()">
                        Try Again
                    </button>
                `;
                }
            }

            redirectToGoogle();
        </script>
    </body>
</html>
